<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>task1</title>
</head>
<body>
<script>
    class Customer{
        constructor(name,cmnd,birthday,email,address,typeServicer,typeRoom,typeCustomer,disCount,quantityIncluded,rentDay){
            this.name = name;
            this.cmnd = cmnd;
            this.birthday = birthday;
            this.email = email;
            this.address = address;
            this.typeService = typeServicer;
            this.typeRoom = typeRoom;
            this.typeCustomer = typeCustomer;
            this.disCount = disCount;
            this.quantityIncluded = quantityIncluded;
            this.rentDay = rentDay;
        }
        setName(name){
            this.name = name;
        }
        getName(){
            return this.name;
        }
        setCmnd(cmnd){
            this.cmnd = cmnd;
        }
        getCmnd(){
            return this.cmnd;
        }
        setBirthday(birthday){
            this.birthday = birthday;
        }
        getBirthday(){
            return this.birthday;
        }
        setEmail(email){
            this.email = email;
        }
        getEmail(){
            return this.email;
        }
        setAddress(address){
            this.address = address;
        }
        getAddress(){
            return this.address;
        }
        setTypeServicer(typeServicer){
            this.typeService = typeServicer;
        }
        getTypeServicer(){
            return this.typeService;
        }
        setTypeRoom(typeRoom){
            this.typeRoom = typeRoom;
        }
        getTypeRoom(){
            return this.typeRoom;
        }
        setTypeCustomer(typeCustomer){
            this.typeCustomer = typeCustomer;
        }
        getTypeCustomer(){
            return this.typeCustomer;
        }
        setDisCount(disCount){
            this.disCount = disCount;
        }
        getDisCount(){
            return this.disCount;
        }
        setQuantityIncluded(quantityIncluded){
            this.quantityIncluded = quantityIncluded;
        }
        getQuantityIncluded(){
            return this.quantityIncluded;
        }
        setRentDay(rentDay){
            this.rentDay = rentDay;
        }
        getRentDay(){
            return this.rentDay;
        }
        totalPay() {
            let money = 0;
            if (this.getTypeServicer()==="Villa"){
                money = 500;
            }else if (this.getTypeServicer() ==="House"){
                money = 300;
            }else if (this.getTypeServicer()=== "Room"){
                money = 200;
            }
            return this.getRentDay()*money*(1-this.getDisCount()/100);
        }
    }

    let regexEmail = /\S+@\S+\.\S+/;
    let regexBirthday = /^\d{2}[./-]\d{2}[./-]\d{4}$/;
    let regexCmnd = /^[\d]{8,8}$/;
    let regexNumber = /^\d+$/;
    let listCustomer = [];
   function displayMainMenu() {
       let choose =parseInt(prompt("1.Add new Customer. " + "\n2.Display Information Customer"  +
           "\n3.Display total pays Customer" + "\n4.Edit Information Customer" + "\n5.Delete Customer" + "\n6.Exit"));
       switch (choose) {
           case 1:{
               addNewCustomer();
               break;
           }
           case 3:{
               displayTotalPays();
           }
           default: {
               alert("Failded");
           }
       }
   }
   function displayTotalPays() {
       let temp ="";
       for (let i=0;i<listCustomer.length;i++){
           temp += i + ". Name: " + listCustomer[i].getName() + "\n";
       }
       let chooseDisplay = parseInt(prompt(temp));
       alert("total pays của bạn là: " + listCustomer[chooseDisplay].totalPay())
   }

   function addNewCustomer() {
       let checkValid = false;
       let cus = new Customer();
       let name = prompt("input name: ");
       let cmnd;
       do {
           cmnd = prompt("input cmnd: ");
           if (regexCmnd.test(cmnd)){
               checkValid =true;
           }else {
               alert("chứng minh nhân dân bạn nhập không hợp lệ")
           }
       }while (!checkValid);
       checkValid = false;
       let birthday;
       do {
           birthday = prompt("input birth: ");
           if (regexBirthday.test(birthday)){
               checkValid = true;
           }else {
               alert("ngày sinh bạn nhập không hợp lệ")
           }
       }while (!checkValid);
       checkValid = false;
       let email;
       do {
           email = prompt("input emali: ");
           if (regexEmail.test(email)){
               checkValid = true;
           }else {
               alert("Email không hợp lệ.")
           }
       }while (!checkValid);
       checkValid = false;

       let address = prompt("input address: ");
       let typeService = prompt("input typeservice: ");
       let typeRoom = prompt("input typeroom: ");
       let typeCustomer = prompt("input typecustomer: ");
       let discount;
       do {
           discount = prompt("input discount: ");
           if (regexNumber.test(discount)){
               checkValid =true;
           }else {
               alert("giảm không hợp lệ");
           }
       }while (!checkValid);
       checkValid = false;
       let quantityIncluded;
       do {
           quantityIncluded = prompt("input quantityincluded: ");
           if (regexNumber.test(quantityIncluded)){
               checkValid = true;
           }else {
               alert("số lượng người nhập không hợp lệ")
           }
       }while (!checkValid);
       checkValid = false;
       let rentDay;
       do {
           rentDay = prompt("input rentday: ");
           if (regexNumber.test(rentDay)){
               checkValid = true;
           }else {
               alert("bạn nhập số ngày không hợp lệ");
           }
       }while (!checkValid);
       cus.setName(name);
       cus.setBirthday(birthday);
       cus.setCmnd(cmnd);
       cus.setEmail(email);
       cus.setAddress(address);
       cus.setTypeServicer(typeService);
       cus.setTypeRoom(typeRoom);
       cus.setTypeCustomer(typeCustomer);
       cus.setDisCount(discount);
       cus.setQuantityIncluded(quantityIncluded);
       cus.setRentDay(rentDay);
       listCustomer.push(cus);
       alert("bạn đã thêm thành công");
       displayMainMenu();
   }
   displayMainMenu();
</script>
</body>
</html>